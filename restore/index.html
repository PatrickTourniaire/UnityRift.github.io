<!DOCTYPE html>
<html>
  <head>
    <title>Restore</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta lang="en">

    <link rel="stylesheet" type="text/css" href="assets/sass/main.css">
    <link rel="stylesheet" type="text/css" href="assets/sass/feed.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.8.0/firebase.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/2.3.0/mustache.js"></script>
  </head>
  <body>

    <script id="article-tenplate" type="text/template">
      <div class="article {{key}}">
        <div class="thumbnail-box"
        style="
          background: url('{{img}}') center no-repeat;
          background-size: cover
        ">
        </div>
        <div class="info-box">
          <section class="wrapper">
            <p class="header small-header art-header {{key}} {{category}}">{{title}}</p>
            <section class="description">
              <p>{{desc}}</p>
            </section>
          </section>

          <section id="footer">
            <a href="http://news.mit.edu/topic/artificial-intelligence2" class="publication"></a>
            <div class="info">
              <a id="author">{{author}}</a>
              <p id="date">{{date}}</p>
            </div>
          </section>
        </div>
      </div>
    </script>

    <div class="loading">
      <p class="header large-header">
        “I visualize a time when we will be to robots what dogs are to humans, and I’m rooting for the machines.” —Claude Shannon
      </p>
    </div>

    <div class="login-state">
      <div class="login-box">
        <img src="assets/svg/x.svg" class="exit-login" alt="exit"/>
        <p class="header large-header login-header">Login to restore</p>
        <p id="desc">Login with your preffered platform</p>

        <div class="login-options">
            <div class="option facebook">
              <svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-facebook">
                <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>
              </svg>
              <p>Login with Facebook</p>
            </div>
          </div>
        </div>
      </div>

      <div class="about-state">
        <div class="login-box">
          <img src="assets/svg/x.svg" class="exit-login" alt="exit"/>
          <p class="header large-header about-header about-toggle">About Restore</p>
          <p class="desc">
            Restore was a project I created to educate people about advancements made in Artificial Inteligence. My
            Algorythm searches the web for articles about AI and presents it in a more readable fasion. With restore
            you can read about recent advancments in areas such as medicine, robotics or even sports but they are all
            connected to artificial inteligence.
          </p>
          <p class="header larger-header quote-about">
            “I visualize a time when we will be to robots what dogs are to humans, and I’m rooting for the machines.” —Claude Shannon
          </p>
        </div>
      </div>

      <div class="bookmarks">
        <div class="login-box">
          <img src="assets/svg/x.svg" class="exit-login" alt="exit"/>
          <p class="header large-header about-header">Your Board</p>
          <div class="desc">
            <p>Select a topic to be displayed on your board.</p>
            <select id="topic-personal">
              <option value="computer modeling">Computer Modeling</option>
              <option value="data">Data</option>
              <option value="machine learning">Machine Learning</option>
              <option value="medicine">Medical</option>
              <option value="robots">Robots</options>
            </select>
          </div>
        </div>
      </div>

    <div class="nav-wrapper">
      <div class="nav-header">
        <p class="small-link about-header about-toggle">About Restore</p>
        <a href="index.html" class="header large-header header-nav">Restore</a>

        <div class="login">
          <a href="#" class="small-link-active login-btn">Sign in</a>
          <a href="#" class="bordered-link-active login-btn">Get started</a>
        </div>
        <div class="profile">
          <div class="user-info">
            <p id="profile-name"></p>
            <p id="profile-email"></p>
          </div>
          <img src="#" id="profile-img" alt="profile"/>
        </div>
      </div>
      <div class="profile-menu">
        <ul>
          <li><a href="#" id="board">Your board</a></li>
          <li><a href="#" id="sign-out">Logout</a></li>
        </ul>
      </div>

      <div class="nav-pages">
        <ul class="nav">
          <li><a href="index.html" class="topic active" id="home">Home</a></li>
          <li><a href="#" class="topic" id="cm">Computer Modeling</a></li>
          <li><a href="#" class="topic" id="data">Data</a></li>
          <li><a href="#" class="topic" id="ml">Machine Learning</a></li>
          <li><a href="#" class="topic" id="medicine">Medical</a></li>
          <li><a href="#" class="topic" id="robots">Robots</a></li>
        </ul>
      </div>
    </div>

    <main class="feed">
      <section class="latest-article">
        <div class="info-box">
          <section class="wrapper">
            <p class="header large-header latest-title">MIT President Reif attends White House technology meeting</p>
            <section class="description latest-desc">
              <p>Conference convened by the White House Office of American Innovation includes leading corporate CEOs and other technology leaders.</p>
            </section>
          </section>

          <section id="footer">
            <a href="http://news.mit.edu/topic/artificial-intelligence2" class="publication"></a>
            <div class="info">
              <a id="author" class="latest-author">MIT News Office</a>
              <p id="date" class="latest-date">June 19</p>
            </div>
          </section>
        </div>
      </section>

      <section class="top-articles-parent">
        <section class="articles-header">
          <p class="header-mnd top-sect-header">Artificial Inteligence</p>
        </section>

        <section class="articles-wrapper top-articles article-parent">

        </section>
    </section>

      <section class="membership">
          <p class="header large-header">Interested to learn more? Get started today.</p>
          <p class="description">Restore only uses the most reliable sources among them being MIT. If you are interested in the future of this world then you should defenitly consider joining today.</p>

          <div class="actions">
            <a href="#" class="bordered-link-fill login-btn">Get started</a>
            <a href="#" class="bordered-link about-toggle">Learn more</a>
          </div>

          <div class="details">
            <img src="assets/svg/artificial-intelligence.svg" alt="ai"/>
          </div>
      </section>

      <section class="topic-articles top-articles-parent">
        <section class="articles-header">
        </section>

        <section class="articles-wrapper">

        </section>
      </section>

      <section class="footer">
        <div class="nav-pages">
          <ul class="nav">
            <li>Copyright © Patrick Tourniaire</li>
          </ul>
        </div>
      </section>

    </main>

    <script src="js/firebaseInit.js"></script>
    <script src="js/fetchData.js"></script>
    <script src="js/postRequests.js"></script>
    <script src="js/clickEvents.js"></script>
    <script src="js/userHandler.js"></script>
    <script src="js/bookmark.js"></script>
    <!--<script src="js/behavior.js"></script>-->

    <script>
    firebase.auth().onAuthStateChanged(function(user) {
      if (user) {
        //Hide login state
        $(".login").css("display", "none");
        $(".profile").css("display", "block");
        $(".getStarted").css("display", "none");
        $(".login-btn").css("display", "none");

        console.log("Logged in");
        var user = firebase.auth().currentUser;

        user.providerData.forEach(function (profile) {
          console.log("Sign-in provider: " + profile.providerId);
          console.log("  Provider-specific UID: " + profile.uid);
          console.log("  Name: " + profile.displayName);
          console.log("  Email: " + profile.email);
          console.log("  Photo URL: " + profile.photoURL);

          $("#profile-img").attr("src", profile.photoURL);
          $("#profile-name").html(profile.displayName);
          $("#profile-email").html(profile.email);

          var db = firebase.database();
          var userRef = db.ref().child("users").child(profile.uid);

          var topicVal = $('#topic-personal option:selected').val()
          console.log("topicVal: " + topicVal);

          userRef.set({
            topic: topicVal
          });
        });

      } else {
        console.log("Not logged in");

        //Show login state
        $(".login").css("display", "block");
        $(".profile").css("display", "none");
        $(".getStarted").css("display", "block");
      }
    });
    </script>
  </body>
</html>
